<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WorkSpace - Shared Workspace Web App</title>

  <!-- Tailwind CSS Configuration -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Custom Tailwind CSS Configuration -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#2563eb',
            secondary: '#0891b2',
            accent: '#ea580c'
          }
        }
      }
    }
  </script>

  <!-- IMPORT JQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

  <!-- Import scripts of this application -->
  <script src="./scripts/main.js" defer></script>
  <script src="./scripts/login.js" defer></script>
  <script src="./scripts/properties.js" defer></script>
  <script src="./scripts/registration.js" defer></script>
  <script src="./scripts/workspaces.js" defer></script>
  <script src="./services/apiService.js" defer></script>

</head>

<!-- Reuse header -->
<!-- In all HTML files, replace the header with this: -->
<header class="bg-white shadow-sm sticky top-0 z-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <div class="flex items-center">
        <a href="index.html" class="flex items-center">
          <svg class="h-8 w-8 text-blue-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4">
            </path>
          </svg>
          <span class="text-2xl font-bold text-gray-900">WorkSpace</span>
        </a>
      </div>
      <div class="flex items-center space-x-4 auth-buttons">
        <!-- Dynamic buttons will be inserted here by main.js -->
      </div>
    </div>
  </div>
</header>

<main class="max-w-7xl mx-auto px-4 py-8">
  <div class="flex justify-between items-center mb-8">
    <h1 class="text-2xl font-bold">My Properties</h1>
    <button id="addNewPropertyButton" class="px-4 py-2 bg-green-600 text-white rounded">New Property</button>
  </div>

  <!-- Layout Grid -->
  <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">

    <!-- Filters Section -->
    <div class="col-span-1 bg-white p-4 rounded-lg shadow-sm top-24 h-fit w-full">
      <h2 class="font-bold text-lg mb-4">Filters</h2>
      <div class="space-y-4">
        <!-- Sort Filter -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Sort By</label>
          <select id="sortFilter" class="w-full p-2 border border-gray-300 rounded-md">
            <option value="">Default</option>
            <option value="name">Name</option>
            <option value="address">Address</option>
            <option value="neighborhood">Neighborhood</option>
            <option value="available_from">Available From</option>
          </select>
        </div>

        <!-- Name Filter -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
          <input type="text" id="nameFilter" placeholder="Name" class="w-full p-2 border border-gray-300 rounded-md">
        </div>

        <!-- Location Filter -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
          <input type="text" id="locationFilter" placeholder="City or neighborhood"
            class="w-full p-2 border border-gray-300 rounded-md">
        </div>

        <!-- Search Button -->
        <button id="applyFiltersProperties"
          class="w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"
            stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M21 21l-4.35-4.35m1.15-5.65A7 7 0 1110 3a7 7 0 017 7z" />
          </svg>
          Search
        </button>
      </div>
    </div>

    <!-- Properties Section (80%) -->
    <div class="col-span-4">
      <div class="lg:max-h-[calc(100vh-6rem)] lg:overflow-y-auto pr-2">
        <!-- Make properties scrollable here -->
        <div id="propertyList" class="grid grid-cols-1 sm:grid-cols-2 gap-6">
          <!-- Property cards will be dynamically inserted here -->
        </div>
        <div id="workspaceModal"
          class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">

          <div class="bg-white rounded-lg shadow-xl w-[90%] lg:w-[80%] max-h-[90vh] overflow-y-auto">
            <div class="p-6">
              <h3 class="text-xl font-bold mb-4">Workspaces</h3>

              <div id="workspaceList" class="grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                <!-- Long content will go here -->
              </div>

              <!-- Buttons -->
              <div class="flex justify-end gap-2">
                <button id="cancelWorkspaceBtn" class="px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded">
                  Cancel
                </button>
                <button id="addWorkspaceBtn" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded">
                  Add New
                </button>
              </div>
            </div>
          </div>
        </div>
        <form id="addPropertyForm" class="space-y-4 mb-4 hidden">
          <input type="text" id="newPropertyName" class="w-full p-3 border border-gray-300 rounded"
            placeholder="Property name..." required>
          <input type="text" id="newPropertyAddress" class="w-full p-3 border border-gray-300 rounded"
            placeholder="Address..." required>
          <input type="text" id="newPropertyNeighborhood" class="w-full p-3 border border-gray-300 rounded"
            placeholder="Neighborhood..." required>
          <!-- Image upload area -->
          <div class="flex-1 border-2 border-dashed border-gray-300 rounded p-8 text-center bg-gray-100">
            <input type="file" id="propertyImage" accept="image/*" class="hidden">
            <label for="propertyImage" class="cursor-pointer text-gray-500 hover:text-gray-700">
              Click to upload image
            </label>

            <!-- Image preview (initially hidden) -->
            <div id="imagePreviewContainer" class="mt-4 hidden">
              <img id="imagePreview" class="mx-auto max-h-40 rounded shadow" />
            </div>
          </div>
          <!-- Checkboxes -->
          <div class="space-y-4">
            <input type="number" id="newSqft" class="w-32 p-3 border border-gray-300 rounded" placeholder="Sqft"
              required>
            <div class="flex items-center space-x-2">
              <input type="checkbox" id="parking" class="h-4 w-4">
              <label for="parking" class="text-sm">Parking</label>
            </div>

            <div class="flex items-center space-x-2">
              <input type="checkbox" id="publicTransportation" class="h-4 w-4">
              <label for="publicTransportation" class="text-sm">Public transportation</label>
            </div>
          </div>

          <!-- Dropdown -->
          <select id="listingStatus" class="w-48 p-3 border border-gray-300 rounded">
            <option value="listed">Listed</option>
            <option value="not-listed">Not Listed</option>
          </select>

          <div class="flex justify-end gap-4 mt-6">
            <button id="cancelButton" type="button"
              class="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg shadow-sm hover:bg-gray-300 transition-colors">
              Cancel
            </button>

            <button type="submit"
              class="px-6 py-2 bg-green-600 text-white rounded-lg shadow-sm hover:bg-green-700 transition-colors">
              Save
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</main>

<!-- Footer -->
<footer class="bg-gray-900 text-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <div class="flex items-center mb-4">
          <svg class="h-8 w-8 text-blue-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4">
            </path>
          </svg>
          <span class="text-2xl font-bold">WorkSpace</span>
        </div>
        <p class="text-gray-400">
          Connecting coworkers with perfect workspace solutions worldwide.
        </p>
      </div>
      <div>
        <h3 class="text-lg font-semibold mb-4">For Coworkers</h3>
        <ul class="space-y-2 text-gray-400">
          <li><a href="#" class="hover:text-white transition-colors">Find Workspace</a></li>
          <li><a href="#" class="hover:text-white transition-colors">Browse Locations</a></li>
          <li><a href="#" class="hover:text-white transition-colors">Pricing</a></li>
          <li><a href="#" class="hover:text-white transition-colors">Reviews</a></li>
        </ul>
      </div>
      <div>
        <h3 class="text-lg font-semibold mb-4">For Owners</h3>
        <ul class="space-y-2 text-gray-400">
          <li><a href="#" class="hover:text-white transition-colors">List Property</a></li>
          <li><a href="#" class="hover:text-white transition-colors">Manage Listings</a></li>
          <li><a href="#" class="hover:text-white transition-colors">Owner Resources</a></li>
          <li><a href="#" class="hover:text-white transition-colors">Support</a></li>
        </ul>
      </div>
      <div>
        <h3 class="text-lg font-semibold mb-4">Company</h3>
        <ul class="space-y-2 text-gray-400">
          <li><a href="#" class="hover:text-white transition-colors">About Us</a></li>
          <li><a href="#" class="hover:text-white transition-colors">Contact</a></li>
          <li><a href="#" class="hover:text-white transition-colors">Privacy Policy</a></li>
          <li><a href="#" class="hover:text-white transition-colors">Terms of Service</a></li>
        </ul>
      </div>
    </div>
    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
      <p>&copy; 2025 WorkSpace. All rights reserved.</p>
    </div>
  </div>
</footer>

<!-- ===== CRUD Modals ===== -->
<!-- Edit Property Modal -->
<div id="editPropertyModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg p-6 w-full max-w-md">
    <h2 class="text-xl font-bold mb-4">Edit Property</h2>
    <input type="hidden" id="editPropertyId">
    <div class="mb-3"><input id="editPropertyAddress" type="text" class="w-full p-2 border rounded"
        placeholder="Address"></div>
    <div class="mb-3"><input id="editPropertyNeighborhood" type="text" class="w-full p-2 border rounded"
        placeholder="Neighborhood"></div>
    <div class="flex justify-end space-x-2">
      <button onclick="closeModal('editPropertyModal')" class="px-4 py-2 bg-gray-300 rounded">Cancel</button>
      <button onclick="savePropertyEdit()" class="px-4 py-2 bg-blue-600 text-white rounded">Save</button>
    </div>
  </div>
</div>

<!-- Delete Property Modal -->
<div id="deletePropertyModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg p-6 w-full max-w-sm text-center">
    <input type="hidden" id="deletePropertyId">
    <p class="mb-6">Are you sure you want to delete this property?</p>
    <div class="flex justify-center space-x-2">
      <button onclick="closeModal('deletePropertyModal')" class="px-4 py-2 bg-gray-300 rounded">Cancel</button>
      <button onclick="confirmPropertyDelete()" class="px-4 py-2 bg-red-600 text-white rounded">Delete</button>
    </div>
  </div>
</div>

<!-- Edit Workspace Modal -->

<div id="editWorkspaceModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
    <h2 class="text-xl font-bold mb-4">Edit Workspace</h2>

    <input type="hidden" id="editWorkspaceId" />

    <!-- Workspace Name -->
    <div class="mb-3">
      <input id="workspaceName" type="text" class="w-full p-2 border rounded" placeholder="Workplace name..." />
    </div>

    <!-- Description -->
    <div class="mb-3">
      <input id="workspaceDescription" type="text" class="w-full p-2 border rounded" placeholder="Description..." />
    </div>

    <div class="grid grid-cols-2 gap-4 mb-3">
      <!-- Type of Room -->
      <select id="workspaceType" class="w-full p-2 border rounded">
        <option value="">Type of Room</option>
        <option value="private">Private</option>
        <option value="shared">Shared</option>
      </select>

      <!-- Capacity -->
      <select id="workspaceCapacity" class="w-full p-2 border rounded">
        <option value="">Capacity</option>
        <option value="1">1 person</option>
        <option value="2">2 people</option>
        <option value="4">4 people</option>
        <option value="6">6+ people</option>
      </select>
    </div>

    <!-- Smoking -->
    <div class="mb-3 flex items-center space-x-4">
      <label class="font-medium">Smoking</label>
      <label class="flex items-center">
        <input type="radio" name="smoking" value="yes" class="mr-1" />
        Yes
      </label>
      <label class="flex items-center">
        <input type="radio" name="smoking" value="no" class="mr-1" />
        No
      </label>
    </div>

    <!-- Date Picker -->
    <div class="mb-3 flex items-center space-x-2">
      <span>ðŸ“…</span>
      <input type="date" id="workspaceDate" class="p-2 border rounded w-full" />
    </div>

    <!-- Lease Term -->
    <div class="mb-3">
      <input id="workspaceLeaseTerm" type="text" class="w-full p-2 border rounded" placeholder="Lease term" />
    </div>

    <!-- Price -->
    <div class="mb-3">
      <input id="workspacePrice" type="number" step="0.01" class="w-full p-2 border rounded" placeholder="Price $..." />
    </div>

    <!-- Photo Upload + Preview -->
    <div class="mb-4">
      <label class="block text-sm font-medium mb-1">Add photo</label>
      <div class="border border-dashed border-gray-400 rounded-md p-4 flex flex-col items-center text-gray-500">
        <label class="cursor-pointer mb-2">
          <span class="block">ðŸ“· Click to upload</span>
          <input type="file" id="workspacePhoto" accept="image/*" class="hidden" />
        </label>
        <img id="imageWorkspacePreview" src="" alt="Preview" class="hidden mt-2 max-h-40 rounded" />
      </div>
    </div>

    <!-- Actions -->
    <div class="flex justify-between items-center mt-6">
      <div class="flex space-x-2">
        <button type="button" onclick="handleDelist()"
          class="px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600">
          Delist
        </button>
      </div>
      <div class="flex space-x-2">
        <button type="button" onclick="clearWorkspaceModalData()" class="px-4 py-2 bg-gray-300 rounded">Cancel</button>
        <button type="button" onclick="saveWorkspaceEdit()"
          class="px-4 py-2 bg-blue-600 text-white rounded">Save</button>
      </div>
    </div>
  </div>
</div>



<!-- Delete Workspace Modal -->
<div id="deleteWorkspaceModal"
  class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg p-6 w-full max-w-sm text-center">
    <input type="hidden" id="deleteWorkspaceId">
    <p class="mb-6">Are you sure you want to delete this workspace?</p>
    <div class="flex justify-center space-x-2">
      <button type="button" onclick="closeModal('deleteWorkspaceModal')"
        class="px-4 py-2 bg-gray-300 rounded">Cancel</button>
      <button type="button" onclick="confirmWorkspaceDelete()"
        class="px-4 py-2 bg-red-600 text-white rounded">Delete</button>
    </div>
  </div>
</div>

<script>
  function openModal(id) {
    document.getElementById(id).classList.remove('hidden');
  }
  function closeModal(id) {
    document.getElementById(id).classList.add('hidden');
  }
</script>

</body>

</html>